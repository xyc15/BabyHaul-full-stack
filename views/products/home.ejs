<% include ../partials/header %>

  <div class="container my-4">
    <div class="card bg-light border-0 p-3">
      <div class="card-body">
        <h1 class="card-title">Welcome To BabyHaul!</h1>
        <p class="card-text">View the popular baby products recommended by experienced parents</p>
        <a href="/products/new" class="btn btn-primary btn-lg">Add a new baby product</a>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row align-items-center">

    <% products.forEach((product) => { %>
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card mb-3">
          <img src="<%= product.image%>" class="card-img-top" alt="<%= product.name%>">
          <div class="card-body text-center">
            <h5 class="card-title"><%= product.name%></h5>
            <a href="/products/<%= product._id%>" class="btn btn-primary">More Info</a>
          </div>
        </div>
      </div>
    <% })%>
  </div>
    <%# //pagination %>

    <div class="row align-items-center">
    <% if(pages > 0){ %>
      <ul class="pagination mb-4 mx-auto" >
        <% if(current == 1){ %>
            <li class="disabled page-item"><a class="page-link">First</a></li>
        <% } else{%>
            <li class="page-item"><a class="page-link" href="/products?search=<%= search %>">First</a></li>
        <% } %>

        <% var i = (Number(current) > 5 ? Number(current) -4 : 1) %>

        <% if (i !== 1) { %>
          <li class="disabled page-item"><a class="page-link">...</a></li>
        <% } %>

        <% for(; i <= (Number(current) + 4) && i <= pages; i++){ %>
           <% if(i == current ){ %>
              <li class="active page-item"><a class="page-link"><%= i %></a></li>
           <% } else{ %>
                <li class="page-item"><a class="page-link" href="/products?page=<%= i %>&search=<%= search %>"><%= i %></a></li>
           <% } %>

           <% if(i == Number(current) + 4 && i < pages){ %>
              <li class="disabled page-item"><a class="page-link">...</a></li>
           <% } %>
         <% } %>

         <% if(current == pages){ %>
            <li class="disabled page-item"><a class="page-link">Last</a></li>
         <% } else{ %>
            <li class="page-item"><a class="page-link" href="/products?page=<%= pages %>&search=<%= search %>">Last</a></li>
         <% } %>
      </ul>
   <%  } %>
   </div>

  </div>

<% include ../partials/footer %>
